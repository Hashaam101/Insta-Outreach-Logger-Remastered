# ðŸ—„ï¸ Oracle Cloud Database Schema

- **Service**: Oracle Autonomous Transaction Processing (ATP)
- **Tier**: Always Free
- **Connection**: `python-oracledb` (Thin Mode) with Wallet (mTLS).

---

## 1. Tables

### `ACTORS`

Stores the Instagram Accounts (Sender Profiles) and their human owner.

| Column           | Type          | Constraints | Description                         |
| :--------------- | :------------ | :---------- | :---------------------------------- |
| `USERNAME`       | `VARCHAR2(255)` | **PK**      | IG Handle (e.g., "brand_official"). |
| `STATUS`         | `VARCHAR2(50)`  | Default 'active' | Current status (e.g., active, suspended). |
| `OWNER_OPERATOR` | `VARCHAR2(255)` |             | The human Operator who owns this Actor. |

### `PROSPECTS` (Core CRM)

The master list of leads. One row per target Instagram user.

| Column            | Type            | Constraints          | Description                               |
| :---------------- | :-------------- | :------------------- | :---------------------------------------- |
| `TARGET_USERNAME` | `VARCHAR2(255)`   | **PK**               | The Lead's IG Handle.                     |
| `STATUS`          | `VARCHAR2(50)`    | Default `'new'`      | Current CRM Status.                       |
| `OWNER_ACTOR`     | `VARCHAR2(255)`   | **FK** -> `ACTORS`   | Which of our accounts found this lead.    |
| `FIRST_CONTACTED` | `TIMESTAMP`     | Default `CURRENT_TIMESTAMP` |                                           |
| `NOTES`           | `VARCHAR2(1000)`  |                      | CRM notes for this prospect.              |

### `OUTREACH_LOGS` (Analytics)

An append-only log of every message sent. Used for "Daily Activity" dashboards.

| Column            | Type             | Constraints          | Description                       |
| :---------------- | :--------------- | :------------------- | :-------------------------------- |
| `LOG_ID`          | `NUMBER`         | **PK**, Identity     | Auto-incrementing ID.             |
| `ACTOR_USERNAME`  | `VARCHAR2(255)`    | **FK** -> `ACTORS`   | The Actor who sent the message.   |
| `TARGET_USERNAME` | `VARCHAR2(255)`    | **FK** -> `PROSPECTS` | The Prospect who received the message. |
| `MESSAGE_TEXT`    | `VARCHAR2(2000)` |                      | Full text of the sent message.    |
| `CREATED_AT`      | `TIMESTAMP`      | Default `CURRENT_TIMESTAMP` |                                   |

---

## âš¡ Setup Script (SQL)

Run this in **Oracle Database Actions (SQL Worksheet)** to initialize the DB.

```sql
DROP TABLE OUTREACH_LOGS CASCADE CONSTRAINTS;
DROP TABLE PROSPECTS CASCADE CONSTRAINTS;
DROP TABLE ACTORS CASCADE CONSTRAINTS;

CREATE TABLE ACTORS (
    USERNAME VARCHAR2(255) PRIMARY KEY,
    STATUS VARCHAR2(50) DEFAULT 'active',
    OWNER_OPERATOR VARCHAR2(255)
);

CREATE TABLE PROSPECTS (
    TARGET_USERNAME VARCHAR2(255) PRIMARY KEY,
    STATUS VARCHAR2(50) DEFAULT 'new',
    OWNER_ACTOR VARCHAR2(255),
    FIRST_CONTACTED TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    NOTES VARCHAR2(1000)
);

CREATE TABLE OUTREACH_LOGS (
    LOG_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ACTOR_USERNAME VARCHAR2(255),
    TARGET_USERNAME VARCHAR2(255),
    MESSAGE_TEXT VARCHAR2(2000),
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_log_actor FOREIGN KEY (ACTOR_USERNAME) REFERENCES ACTORS(USERNAME),
    CONSTRAINT fk_log_target FOREIGN KEY (TARGET_USERNAME) REFERENCES PROSPECTS(TARGET_USERNAME)
);

-- Indexes for performance
-- No longer needed, as the data volume does not necessitate explicit index creation
-- for this simplified schema and usage patterns.

-- Seed Data (For Testing) - These are examples, use src/scripts/reset_and_seed.py for full seed
-- INSERT INTO ACTORS (USERNAME, OWNER_OPERATOR) VALUES ('hashaam_growth', 'Hashaam');
-- INSERT INTO PROSPECTS (TARGET_USERNAME, OWNER_ACTOR, STATUS) VALUES ('pizza_place_ny', 'hashaam_growth', 'new');
-- INSERT INTO OUTREACH_LOGS (ACTOR_USERNAME, TARGET_USERNAME, MESSAGE_TEXT) VALUES ('hashaam_growth', 'pizza_place_ny', 'Sample message.');
COMMIT;
```